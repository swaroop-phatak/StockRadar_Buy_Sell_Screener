<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="StockRadar - Real-time stock screener with live NSE data for buy/sell signals.">
    <title>StockRadar - Live Stock Screener</title>
    <link rel="stylesheet" href="screener.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        .positive { color: #00ff00; font-weight: bold; }
        .negative { color: #ff4444; font-weight: bold; }
        .buy-signal { color: #00ff00; font-weight: bold; }
        .sell-signal { color: #ff4444; font-weight: bold; }
        .loading { opacity: 0.6; }
        .refresh-info {
            text-align: center;
            margin: 10px 0;
            font-size: 0.9em;
            color: #666;
        }
        .data-status {
            background: #f0f8ff;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            text-align: center;
        }
    </style>
</head>

<body>
<header class="main-header">
    <h1>üì°StockRadar</h1>
    <p class="tagline">We Look, You Leap - Now with LIVE Data!</p>
    <nav class="main-nav">
      <a href="index.html">Home</a>
      <a href="about.html">About</a>
      <a href="contact.html">Contact</a>
    </nav>
  </header>

  <main>
    <section class="intro">
      <p>Your smart edge in stock screening with <strong>REAL-TIME NSE data</strong>. Instantly spot bullish and bearish setups based on live price action, volume trends, and technical indicators.</p>
      <div class="data-status">
        <strong>üî¥ LIVE DATA:</strong> Real-time prices from NSE ‚Ä¢ Auto-refresh every 5 minutes ‚Ä¢ Technical indicators included
      </div>
    </section>

    <section class="table-container">
      <div style="text-align: center; margin-bottom: 15px;">
        <button id="filterBtn">üîç Filter Long/Short</button>
      </div>
      <div class="refresh-info">
        üìä Showing live data from top 20 NSE stocks ‚Ä¢ Last updated: <span id="lastUpdate">Loading...</span>
      </div>
      
      <table id="stockTable">
        <thead>
          <tr>
            <th>Stock Name</th>
            <th>Sector</th>
            <th>Market Cap (Cr)</th>
            <th>Current Price</th>
            <th>P/B Ratio</th>
            <th>D/E Ratio</th>
          </tr>
        </thead>
        <tbody id="stockBody">
          <tr>
            <td colspan="6" style="text-align: center; padding: 20px;">
              üîÑ Loading real stock data...
            </td>
          </tr>
        </tbody>
      </table>
    </section>

    <section id="filteredResults">
      <h2>üìà Long Opportunities (0)</h2>
      <table class="result-table" id="longTable">
        <thead>
          <tr><th>Stock</th><th>Sector</th><th>Price</th><th>Change (% Weekly)</th><th>Signal</th></tr>
        </thead>
        <tbody></tbody>
      </table>

      <h2>üìâ Short Opportunities (0)</h2>
      <table class="result-table" id="shortTable">
        <thead>
          <tr><th>Stock</th><th>Sector</th><th>Price</th><th>Change (% Weekly)</th><th>Signal</th></tr>
        </thead>
        <tbody></tbody>
      </table>
      
      <div class="refresh-info">
        <strong>Screening Criteria:</strong><br>
        üìà <strong>Long (BUY):</strong> Weekly drop ‚â•5%, RSI <45, Price >EMA200, High Volume<br>
        üìâ <strong>Short (SELL):</strong> Weekly gain ‚â•10%, RSI >65, Price <EMA200, High Volume
      </div>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 StockRadar. Made with ‚ù§Ô∏è for traders. Now with LIVE NSE data!</p>
  </footer>

  <!-- Load API first, then logic -->
  <script src="api.js"></script>
  <script src="logic_new.js"></script>
  
  <script>
    // Update last refresh time
    function updateLastRefreshTime() {
      document.getElementById('lastUpdate').textContent = new Date().toLocaleTimeString();
    }
    
    // Update time initially and on data load
    document.addEventListener('DOMContentLoaded', updateLastRefreshTime);
    setInterval(updateLastRefreshTime, 60000); // Update every minute
  </script>
</body>

</html>